<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>SequoiaDB: com.sequoiadb.base.SequoiadbDatasource Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SequoiaDB
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>com</b></li><li class="navelem"><b>sequoiadb</b></li><li class="navelem"><a class="el" href="namespacecom_1_1sequoiadb_1_1base.html">base</a></li><li class="navelem"><a class="el" href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbDatasource.html">SequoiadbDatasource</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbDatasource-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">com.sequoiadb.base.SequoiadbDatasource Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>SequoiaDB DataSource.  
 <a href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbDatasource.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1c9316d6f542447108d343134f84adf3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1c9316d6f542447108d343134f84adf3"></a>
synchronized int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbDatasource.html#a1c9316d6f542447108d343134f84adf3">getIdleConnNum</a> ()</td></tr>
<tr class="memdesc:a1c9316d6f542447108d343134f84adf3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current idle connection amount. <br/></td></tr>
<tr class="separator:a1c9316d6f542447108d343134f84adf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38289c0be5bcb00c7f6f0de7c1c78931"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a38289c0be5bcb00c7f6f0de7c1c78931"></a>
synchronized int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbDatasource.html#a38289c0be5bcb00c7f6f0de7c1c78931">getUsedConnNum</a> ()</td></tr>
<tr class="memdesc:a38289c0be5bcb00c7f6f0de7c1c78931"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current used connection amount. <br/></td></tr>
<tr class="separator:a38289c0be5bcb00c7f6f0de7c1c78931"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a760bfe992a0c816635119fffe3adef58"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a760bfe992a0c816635119fffe3adef58"></a>
synchronized int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbDatasource.html#a760bfe992a0c816635119fffe3adef58">getNormalAddrNum</a> ()</td></tr>
<tr class="memdesc:a760bfe992a0c816635119fffe3adef58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current normal address amount. <br/></td></tr>
<tr class="separator:a760bfe992a0c816635119fffe3adef58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed5ce1ad89566522d2aa961b55008c4b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aed5ce1ad89566522d2aa961b55008c4b"></a>
synchronized int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbDatasource.html#aed5ce1ad89566522d2aa961b55008c4b">getAbnormalAddrNum</a> ()</td></tr>
<tr class="memdesc:aed5ce1ad89566522d2aa961b55008c4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current abnormal address amount. <br/></td></tr>
<tr class="separator:aed5ce1ad89566522d2aa961b55008c4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac465a6cc2a4e4ae0c9acf215f8313c95"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbDatasource.html#ac465a6cc2a4e4ae0c9acf215f8313c95">SequoiadbDatasource</a> (ArrayList&lt; String &gt; urls, String username, String password, <a class="el" href="classcom_1_1sequoiadb_1_1net_1_1ConfigOptions.html">ConfigOptions</a> nwOpt, <a class="el" href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbOption.html">SequoiadbOption</a> dsOpt)  throws BaseException 	</td></tr>
<tr class="memdesc:ac465a6cc2a4e4ae0c9acf215f8313c95"><td class="mdescLeft">&#160;</td><td class="mdescRight">constructor.  <a href="#ac465a6cc2a4e4ae0c9acf215f8313c95"></a><br/></td></tr>
<tr class="separator:ac465a6cc2a4e4ae0c9acf215f8313c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83f73c61f908b008928686be959841c2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbDatasource.html#a83f73c61f908b008928686be959841c2">SequoiadbDatasource</a> (String url, String username, String password, <a class="el" href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbOption.html">SequoiadbOption</a> dsOpt)  throws BaseException 	</td></tr>
<tr class="memdesc:a83f73c61f908b008928686be959841c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a83f73c61f908b008928686be959841c2"></a><br/></td></tr>
<tr class="separator:a83f73c61f908b008928686be959841c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae288705af90abd3bd880fcacc3e97f81"><td class="memItemLeft" align="right" valign="top">synchronized <a class="el" href="classcom_1_1sequoiadb_1_1base_1_1Sequoiadb.html">Sequoiadb</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbDatasource.html#ae288705af90abd3bd880fcacc3e97f81">getConnection</a> ()  throws BaseException, InterruptedException 	</td></tr>
<tr class="memdesc:ae288705af90abd3bd880fcacc3e97f81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the connection from current datasource.  <a href="#ae288705af90abd3bd880fcacc3e97f81"></a><br/></td></tr>
<tr class="separator:ae288705af90abd3bd880fcacc3e97f81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acea942cb50b633be1276c186af25865d"><td class="memItemLeft" align="right" valign="top">synchronized void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbDatasource.html#acea942cb50b633be1276c186af25865d">close</a> (<a class="el" href="classcom_1_1sequoiadb_1_1base_1_1Sequoiadb.html">Sequoiadb</a> sdb)  throws BaseException 	</td></tr>
<tr class="memdesc:acea942cb50b633be1276c186af25865d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put the connection back to the datasource. In the case of the connecton is not belong to current datasource or the connecton is outdate(by default, if a connection has not be used for 10 minutes), this API will disconnect directly.  <a href="#acea942cb50b633be1276c186af25865d"></a><br/></td></tr>
<tr class="separator:acea942cb50b633be1276c186af25865d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>SequoiaDB DataSource. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac465a6cc2a4e4ae0c9acf215f8313c95"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">com.sequoiadb.base.SequoiadbDatasource.SequoiadbDatasource </td>
          <td>(</td>
          <td class="paramtype">ArrayList&lt; String &gt;&#160;</td>
          <td class="paramname"><em>urls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1sequoiadb_1_1net_1_1ConfigOptions.html">ConfigOptions</a>&#160;</td>
          <td class="paramname"><em>nwOpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbOption.html">SequoiadbOption</a>&#160;</td>
          <td class="paramname"><em>dsOpt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws BaseException 	</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">urls</td><td>the addresses of coords, can't be null or empty, e.g."ubuntu1:11810","ubuntu2:11810",... </td></tr>
    <tr><td class="paramname">username</td><td>the username for logging sequoiadb </td></tr>
    <tr><td class="paramname">password</td><td>the password for logging sequoiadb </td></tr>
    <tr><td class="paramname">nwOpt</td><td>the options for connection </td></tr>
    <tr><td class="paramname">dsOpt</td><td>the options for datasource </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>When offer several addresses for datasource to use, if some of them are not available(invalid address, network error, coord shutdown, catalog replica group is not available), we will put these addresses into a queue, and check them periodically. If some of them is valid again, get them back for use. When datasource get a unavailable address to connect, the default timeout time is 100ms, and default retry time is 0, use nwOpt can change them. </dd></dl>
<dl class="section see"><dt>See Also</dt><dd>ConfigOptions </dd>
<dd>
<a class="el" href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbOption.html" title="the option of SequoiadbDatasource">SequoiadbOption</a> </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">com.sequoiadb.exception.BaseException</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a83f73c61f908b008928686be959841c2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">com.sequoiadb.base.SequoiadbDatasource.SequoiadbDatasource </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>password</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcom_1_1sequoiadb_1_1base_1_1SequoiadbOption.html">SequoiadbOption</a>&#160;</td>
          <td class="paramname"><em>dsOpt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws BaseException 	</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">url</td><td>the address of coord, can't be null, e.g."ubuntu1:11810" </td></tr>
    <tr><td class="paramname">username</td><td>the username of sequoiadb </td></tr>
    <tr><td class="paramname">password</td><td>the password of sequoiadb </td></tr>
    <tr><td class="paramname">dsOpt</td><td>the option of datasource </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">com.sequoiadb.exception.BaseException</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="acea942cb50b633be1276c186af25865d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void com.sequoiadb.base.SequoiadbDatasource.close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcom_1_1sequoiadb_1_1base_1_1Sequoiadb.html">Sequoiadb</a>&#160;</td>
          <td class="paramname"><em>sdb</em></td><td>)</td>
          <td>  throws BaseException 	</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Put the connection back to the datasource. In the case of the connecton is not belong to current datasource or the connecton is outdate(by default, if a connection has not be used for 10 minutes), this API will disconnect directly. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sdb</td><td>the connection get from current datasource, can't be null </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">com.sequoiadb.Exception.BaseException</td><td>if param sdb is null, throws BaseException with the type "SDB_INVALIDARG" </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae288705af90abd3bd880fcacc3e97f81"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcom_1_1sequoiadb_1_1base_1_1Sequoiadb.html">Sequoiadb</a> com.sequoiadb.base.SequoiadbDatasource.getConnection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>  throws BaseException, InterruptedException 	</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the connection from current datasource. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classcom_1_1sequoiadb_1_1base_1_1Sequoiadb.html" title="Database operation interfaces of admin.">Sequoiadb</a> the connection for use </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">com.sequoiadb.Exception.BaseException</td><td>when datasource run out, throws BaseException with the type of "SDB_DRIVER_DS_RUNOUT" </td></tr>
    <tr><td class="paramname">InterruptedException</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>E:/work/sequoiadb/driver/java/src/main/java/com/sequoiadb/base/SequoiadbDatasource.java</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Oct 29 2014 20:06:36 for SequoiaDB by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
