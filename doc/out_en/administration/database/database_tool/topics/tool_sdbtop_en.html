
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="topic"/>
<meta name="DC.Title" content="Database Performance Monitoring Tool — sdbtop"/>
<meta name="description" content="sdbtop is a performance monitoring tool of SequoiaDB. The information of each node in the cluster can be monitored and checked by this tool. Options Parameters Abbr. Description --help -h return basic ..."/>
<meta name="DC.Relation" scheme="URI" content="../../../../administration/database/database_tool/topics/database_tool_en.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="topic_bsq_m23_x4"/>
<link rel="stylesheet" type="text/css" href="../../../../commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../../../assets/webhelp_topic.css"/>
<title>Database Performance Monitoring Tool — sdbtop</title>
<script type="text/javascript" src="../../../../assets/jquery-1.3.2.js"> </script><script type="text/javascript" src="../../../../assets/jquery-ui-1.8.2.custom.min.js"> </script><script type="text/javascript" src="../../../../assets/frames_redirect.js"> </script><script type="text/javascript"><!--
    var prefix = "../../../../../index.html";
    var ratingFile = "";
    redirectToToc(window.location.search);
    function highlightSearchTerm(){
        if(parent.termsToHighlight != null){
        // highlight each term in the content view  
          for(i = 0 ; i < parent.termsToHighlight.length ; i++){        
              $('*', window.parent.frames[1].document).highlight(parent.termsToHighlight[i]);
          }
        }
    }
//--></script></head>
<body onload="highlightSearchTerm()" id="topic_bsq_m23_x4"><a name="topic_bsq_m23_x4"><!-- --></a>
<table class="nav"><tbody><tr><td><div class="navheader"><span class="frames" onclick="redirectFrames(location.pathname)"><script type="text/javascript"><!--
  if (parent.window.location.pathname == window.location.pathname ) document.write('With Frames');                    
                    --></script></span><a class="link" href="../../../../administration/database/database_tool/topics/database_tool_en.html" title="DataBase Tool"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">DataBase Tool</span></a>  </div></td><td width="50%"><a class="navheader_parent_path" href="../../topics/database_en.html" title="DataBase Management">DataBase Management</a> / <a class="navheader_parent_path" href="../../../../administration/database/database_tool/topics/database_tool_en.html" title="DataBase Tool">DataBase Tool</a></td></tr></tbody></table>

  <h1 class="title topictitle1">Database Performance Monitoring Tool — sdbtop</h1>

  <div class="body">
    <p class="p">sdbtop is a performance monitoring tool of SequoiaDB. The information of each node in the cluster can be monitored and checked by this tool.</p>
    
    <div class="section"><h2 class="title sectiontitle">Options</h2>
      
      <table cellpadding="4" cellspacing="0" summary="" border="1" class="simpletable"><tr class="sthead">
          <th valign="bottom" align="left" id="d23679e22" class="stentry">Parameters</th>

          <th valign="bottom" align="left" id="d23679e25" class="stentry">Abbr.</th>

          <th valign="bottom" align="left" id="d23679e28" class="stentry">Description</th>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e22" class="stentry">--help</td>

          <td valign="top" headers="d23679e25" class="stentry">-h</td>

          <td valign="top" headers="d23679e28" class="stentry">return basic help and usage documents.</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e22" class="stentry">--confpath</td>

          <td valign="top" headers="d23679e25" class="stentry">-c</td>

          <td valign="top" headers="d23679e28" class="stentry">the configuration file of sdbtop, both the UI and output fields of sdbtop depends on this file(default configurations will be used if configuration file is not given by the user)</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e22" class="stentry">--hostname</td>

          <td valign="top" headers="d23679e25" class="stentry">-i</td>

          <td valign="top" headers="d23679e28" class="stentry">specify the host name of the server to be monitored</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e22" class="stentry">--servicename</td>

          <td valign="top" headers="d23679e25" class="stentry">-s</td>

          <td valign="top" headers="d23679e28" class="stentry">specify the service name of the port to be monitored</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e22" class="stentry">--usrname</td>

          <td valign="top" headers="d23679e25" class="stentry">-u</td>

          <td valign="top" headers="d23679e28" class="stentry">database user name</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e22" class="stentry">--password</td>

          <td valign="top" headers="d23679e25" class="stentry">-p</td>

          <td valign="top" headers="d23679e28" class="stentry">database password</td>

        </tr>
</table>

      <div class="p"><div class="note note"><span class="notetitle">Note:</span> For Ubuntu and other systems, you need to install Ncurses library, Or it will shows 'Error opening terminal: TERM'
        <div class="p">Solution1: online installing<pre class="pre codeblock">sudo apt-get install libncurses5-dev</pre>
</div>

        <div class="p">Solution2: Source code installing. Deco mpress tar -xvzf ncurses-5.5.tar.gz and enter ncurses-5.5 content<pre class="pre codeblock">./configure
sudo make &amp;&amp; make install</pre>
</div>
</div>
</div>
      
    </div>

    <div class="section"><h2 class="title sectiontitle">Usage</h2>
      
      <p class="p">In the following example, sdbtop uses "/opt/sequoiadb/conf/sdbtop.xml" as the configuration file, it monitors one node in a server named sdbserver3 on the port in a service name of 11810, using test as both the user name and password.</p>

      <pre class="pre codeblock">sdbtop -c /opt/sequoiadb/conf/sdbtop.xml -i sdbserver3 -s 11810 -u test -p test</pre>

      <p class="p">Then enter the main window:</p>
<pre class="pre codeblock">refresh= 3 secs                             sdbtop 1.0                        snapshotMode: GLOBAL
displayMode: ABSOLUTE                      Main Window                     snapshotModeInput: NULL
hostname: sdbserver3                                                           filtering Number: 0
servicename: 11810                                             sortingWay: NULL sortingField: NULL
usrName: test                                                        Refresh: F5, Quit: q, Help: h

 #####  ######  ######  #######  #####  ######   For help type h or ...
#       #     # #     #    #    #     # #     #  sdbtop -h: usage
#       #     # #     #    #    #     # #     #
 #####  #     # ######     #    #     # ######
      # #     # #     #    #    #     # #
      # #     # #     #    #    #     # #
 #####  ######  ######     #     #####  #

SDB Interactive Snapshot Monitor V2.0
Use these keys to navigate:
  m   -  Main Window            s   -  Sessions               c   -  CollectionSpaces
  t   -  System                 d   -  Database               G   -  GLOBAL_SNAPSHOT
  g   -  GROUP_SNAPSHOT         n   -  NODE_SNAPSHOT          r   -  reset refreshInterval
  A   -  Ascending order        D   -  Descending order       C   -  filter condition
  Q   -  no filter condition    N   -  filter number          W   -  no filter number






Licensed Materials - Property of SequoiaDB
Copyright SequoiaDB Corp. 2013-2014 All Rights Reserved.</pre>

    </div>

    <div class="note note"><span class="notetitle">Note:</span> all the supported keys can be checked by pressing '<strong class="ph b">h</strong>' in the main window</div>

    <ul class="ul"><li class="li"><p class="p">Main window keys usage:</p>

      <table cellpadding="4" cellspacing="0" summary="" border="1" class="simpletable"><tr class="sthead">
          <th valign="bottom" align="left" id="d23679e152" class="stentry">Parameters</th>

          <th valign="bottom" align="left" id="d23679e155" class="stentry">Description</th>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">m</td>

          <td valign="top" headers="d23679e155" class="stentry">return to main window</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">s</td>

          <td valign="top" headers="d23679e155" class="stentry">list all the sessions f the node</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">c</td>

          <td valign="top" headers="d23679e155" class="stentry">list all the collection spaces of the node</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">t</td>

          <td valign="top" headers="d23679e155" class="stentry">list the status of resource usage of the node</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">d</td>

          <td valign="top" headers="d23679e155" class="stentry">list the monitoring information of the node</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">G</td>

          <td valign="top" headers="d23679e155" class="stentry">global_snapshot, monitor all the data node groups</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">g</td>

          <td valign="top" headers="d23679e155" class="stentry">group_snapshot, specify the data node group to be monitored</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">n</td>

          <td valign="top" headers="d23679e155" class="stentry">node_snapshot, list all the monitoring information of the specified databse node</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">r</td>

          <td valign="top" headers="d23679e155" class="stentry">set the time interval of screen refreshing in seconds</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">A</td>

          <td valign="top" headers="d23679e155" class="stentry">sort the monitoring information in ascending order</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">D</td>

          <td valign="top" headers="d23679e155" class="stentry">sort the monitoring information in descending order</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">C</td>

          <td valign="top" headers="d23679e155" class="stentry">filter the monitoring information by certain conditions</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">Q</td>

          <td valign="top" headers="d23679e155" class="stentry">return the information without filtering by the conditions</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">N</td>

          <td valign="top" headers="d23679e155" class="stentry">skip the information with certain line number</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">W</td>

          <td valign="top" headers="d23679e155" class="stentry">return the information without filtering by the line number</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">h</td>

          <td valign="top" headers="d23679e155" class="stentry">check the help document</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">Esc</td>

          <td valign="top" headers="d23679e155" class="stentry">cancel the current operation</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">Enter</td>

          <td valign="top" headers="d23679e155" class="stentry">return to the last monitoring user interface</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">F5</td>

          <td valign="top" headers="d23679e155" class="stentry">forces the background monitoring information to refresh</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">&lt;</td>

          <td valign="top" headers="d23679e155" class="stentry">move to left to check the hided monitoring information in the left column</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">&gt;</td>

          <td valign="top" headers="d23679e155" class="stentry">move to right to check the hided monitoring information in the right column</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">q</td>

          <td valign="top" headers="d23679e155" class="stentry">quit the program</td>

        </tr>
<tr class="strow">
          <td valign="top" headers="d23679e152" class="stentry">Tab</td>

          <td valign="top" headers="d23679e155" class="stentry">change the data computing mode(absolute value, avg. value, difference)</td>

        </tr>
</table>

    </li>
    
      <li class="li">
        <p class="p">Example 1:</p>

        <p class="p">1.	After entering the main window, press key 's' to list all the session information of the nodes.</p>

        <pre class="pre codeblock">refresh= 3 secs                             sdbtop 1.0                        snapshotMode: GLOBAL
displayMode: ABSOLUTE                        Sessions                      snapshotModeInput: NULL
hostname: sdbserver3                                                           filtering Number: 0
servicename: 11810                                             sortingWay: NULL sortingField: NULL
usrName: test                                                        Refresh: F5, Quit: q, Help: h

     SessionID                           TID Type               Name
     ------------------------------ -------- ------------------ ------------------------------
  1  sdbserver3:11820:1                10732 LogWriter          ""
  2  sdbserver3:11820:10               10741 Task               Job[Prefetcher]
  3  sdbserver3:11820:11               10742 Task               Job[Prefetcher]
  4  sdbserver3:11820:12               10743 Task               Job[Prefetcher]
  5  sdbserver3:11820:13               10744 Cluster            ""
  6  sdbserver3:11820:14               10745 ClusterShard       ""
  7  sdbserver3:11820:15               10746 ClusterLogNotify   ""
  8  sdbserver3:11820:16               10747 ShardReader        ""
  9  sdbserver3:11820:17               10748 ReplReader         ""
 10  sdbserver3:11820:18               10749 SyncClockWorker    ""
 11  sdbserver3:11820:19               10750 TCPListener        ""
 12  sdbserver3:11820:2                10733 DpsRollback        ""
 13  sdbserver3:11820:20               10751 RestListener       ""
 14  sdbserver3:11820:21               10752 Task               Job[PageCleaner]
 15  sdbserver3:11820:3                10734 Task               Job[Prefetcher]
 16  sdbserver3:11820:4                10735 Task               Job[Prefetcher]
 17  sdbserver3:11820:42               10847 ReplAgent          NodeID:1000,TID:1,Start:active
 18  sdbserver3:11820:5                10736 Task               Job[Prefetcher]
 19  sdbserver3:11820:59               23263 ShardAgent         NetID:1,TID:23262
 20  sdbserver3:11820:6                10737 Task               Job[Prefetcher]
 21  sdbserver3:11820:7                10738 Task               Job[Prefetcher]
 22  sdbserver3:11820:8                10739 Task               Job[Prefetcher]</pre>

        <p class="p">2.	Press 'Tab', the value of the 'displayMode' on the upper corner of the screen will change.</p>

        <p class="p">3. Press 'r', enter '2' at the bottom of the screen to set the refresh time interval. The value of the 'refresh' on the upper corner of the screen will change to 2.</p>

        <pre class="pre codeblock"><strong class="ph b">refresh= 2 secs</strong>                             sdbtop 1.0                        snapshotMode: GLOBAL
<strong class="ph b">displayMode: ABSOLUTE</strong>                        Sessions                      snapshotModeInput: NULL
hostname: sdbserver3                                                           filtering Number: 0
servicename: 11810                                             sortingWay: NULL sortingField: NULL
usrName: test                                                        Refresh: F5, Quit: q, Help: h

     SessionID                           TID Type               Name
     ------------------------------ -------- ------------------ ------------------------------
  1  sdbserver3:11820:1                10732 LogWriter          ""
  2  sdbserver3:11820:10               10741 Task               Job[Prefetcher]
  3  sdbserver3:11820:11               10742 Task               Job[Prefetcher]
  4  sdbserver3:11820:12               10743 Task               Job[Prefetcher]
  5  sdbserver3:11820:13               10744 Cluster            ""
  6  sdbserver3:11820:14               10745 ClusterShard       ""
  7  sdbserver3:11820:15               10746 ClusterLogNotify   ""
  8  sdbserver3:11820:16               10747 ShardReader        ""
  9  sdbserver3:11820:17               10748 ReplReader         ""
 10  sdbserver3:11820:18               10749 SyncClockWorker    ""
 11  sdbserver3:11820:19               10750 TCPListener        ""
 12  sdbserver3:11820:2                10733 DpsRollback        ""
 13  sdbserver3:11820:20               10751 RestListener       ""
 14  sdbserver3:11820:21               10752 Task               Job[PageCleaner]
 15  sdbserver3:11820:3                10734 Task               Job[Prefetcher]
 16  sdbserver3:11820:4                10735 Task               Job[Prefetcher]
 17  sdbserver3:11820:42               10847 ReplAgent          NodeID:1000,TID:1,Start:active
 18  sdbserver3:11820:5                10736 Task               Job[Prefetcher]
 19  sdbserver3:11820:59               23263 ShardAgent         NetID:1,TID:23262
 20  sdbserver3:11820:6                10737 Task               Job[Prefetcher]
 21  sdbserver3:11820:7                10738 Task               Job[Prefetcher]
 22  sdbserver3:11820:8                10739 Task               Job[Prefetcher]</pre>

        <p class="p">4. Press 'A' and enter 'TID', the result list will be sorted according to TID.</p>

        <pre class="pre codeblock">refresh= 2 secs                             sdbtop 1.0                        snapshotMode: GLOBAL
displayMode: ABSOLUTE                        Sessions                      snapshotModeInput: NULL
hostname: sdbserver3                                                           filtering Number: 0
servicename: 11810                                             sortingWay: NULL sortingField: NULL
usrName: test                                                        Refresh: F5, Quit: q, Help: h

     SessionID                           TID Type               Name
     ------------------------------ -------- ------------------ ------------------------------
  1  sdbserver3:11820:1                10732 LogWriter          ""
  2  sdbserver3:11820:10               10741 Task               Job[Prefetcher]
  3  sdbserver3:11820:11               10742 Task               Job[Prefetcher]
  4  sdbserver3:11820:12               10743 Task               Job[Prefetcher]
  5  sdbserver3:11820:13               10744 Cluster            ""
  6  sdbserver3:11820:14               10745 ClusterShard       ""
  7  sdbserver3:11820:15               10746 ClusterLogNotify   ""
  8  sdbserver3:11820:16               10747 ShardReader        ""
  9  sdbserver3:11820:17               10748 ReplReader         ""
 10  sdbserver3:11820:18               10749 SyncClockWorker    ""
 11  sdbserver3:11820:19               10750 TCPListener        ""
 12  sdbserver3:11820:2                10733 DpsRollback        ""
 13  sdbserver3:11820:20               10751 RestListener       ""
 14  sdbserver3:11820:21               10752 Task               Job[PageCleaner]
 15  sdbserver3:11820:3                10734 Task               Job[Prefetcher]
 16  sdbserver3:11820:4                10735 Task               Job[Prefetcher]
 17  sdbserver3:11820:42               10847 ReplAgent          NodeID:1000,TID:1,Start:active
 18  sdbserver3:11820:5                10736 Task               Job[Prefetcher]
 19  sdbserver3:11820:59               23263 ShardAgent         NetID:1,TID:23262
 20  sdbserver3:11820:6                10737 Task               Job[Prefetcher]
 21  sdbserver3:11820:7                10738 Task               Job[Prefetcher]
 please input the displayName which need order by asc : TID</pre>

        <p class="p">5. Press 'N' and enter 1, the returned list will skip the record with a line number of 1.</p>

        <p class="p">6. Press 'W', the list will be returned without filtered by any line numbers.</p>

        <p class="p">7. Press 'C' and enter 'TID: 10732' to filter the result set, only the record with the a TID of 10732 will be returned.</p>

        <pre class="pre codeblock">refresh= 2 secs                             sdbtop 1.0                        snapshotMode: GLOBAL
displayMode: ABSOLUTE                        Sessions                      snapshotModeInput: NULL
hostname: sdbserver3                                                           filtering Number: 0
servicename: 11810                                             sortingWay: NULL sortingField: NULL
usrName: test                                                        Refresh: F5, Quit: q, Help: h

     SessionID                           TID Type               Name
     ------------------------------ -------- ------------------ ------------------------------
  1  sdbserver3:11820:1                10732 LogWriter          ""
  2  sdbserver3:11820:10               10741 Task               Job[Prefetcher]
  3  sdbserver3:11820:11               10742 Task               Job[Prefetcher]
  4  sdbserver3:11820:12               10743 Task               Job[Prefetcher]
  5  sdbserver3:11820:13               10744 Cluster            ""
  6  sdbserver3:11820:14               10745 ClusterShard       ""
  7  sdbserver3:11820:15               10746 ClusterLogNotify   ""
  8  sdbserver3:11820:16               10747 ShardReader        ""
  9  sdbserver3:11820:17               10748 ReplReader         ""
 10  sdbserver3:11820:18               10749 SyncClockWorker    ""
 11  sdbserver3:11820:19               10750 TCPListener        ""
 12  sdbserver3:11820:2                10733 DpsRollback        ""
 13  sdbserver3:11820:20               10751 RestListener       ""
 14  sdbserver3:11820:21               10752 Task               Job[PageCleaner]
 15  sdbserver3:11820:3                10734 Task               Job[Prefetcher]
 16  sdbserver3:11820:4                10735 Task               Job[Prefetcher]
 17  sdbserver3:11820:42               10847 ReplAgent          NodeID:1000,TID:1,Start:active
 18  sdbserver3:11820:5                10736 Task               Job[Prefetcher]
 19  sdbserver3:11820:59               23263 ShardAgent         NetID:1,TID:23262
 20  sdbserver3:11820:6                10737 Task               Job[Prefetcher]
 21  sdbserver3:11820:7                10738 Task               Job[Prefetcher]
 please input the filter condition : TID:10732</pre>

        <p class="p">8. Press 'Q' to return the list without filtered by filtering by the conditions.</p>

        <p class="p">9. Press '&lt;' or '&gt;' to check the information hided in the left or right columns.</p>

      </li>

    </ul>
    
  </div>

<div class="related-links"/>
<div class="navfooter"><a class="link" href="../../../../administration/database/database_tool/topics/database_tool_en.html" title="DataBase Tool"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">DataBase Tool</span></a>  <script type="text/javascript"><!--         
    function expand(){
        parent.tocwin.expandToTopic(window.location.href, this.getAttribute('href'));
    }
    var aArray = document.getElementsByTagName('a');
    var i;
    for (i = 0; i< aArray.length; i++){
      aArray[i].onclick = expand;
    }
//--></script></div><div class="footer"><a href="http://www.sequoiadb.com" target="_blank"><img src="../../../../assets/images/sequoiadb_logo.png" alt="SequoiaDB"/></a>SequoiaDB Version 1.11
          
    </div>
</body>
</html>