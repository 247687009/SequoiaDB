
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="topic"/>
<meta name="DC.Title" content="db.snapshot()"/>
<meta name="description" content="NAME snapshot - It lists snapshots. SYNOPSIS snapshot ( &lt;snapType&gt; , [cond] , [sel] , [sort] ) CATEGORY Sequoiadb DESCRIPTION It lists snapshots. Snapshot() is a command used to get the current status ..."/>
<meta name="DC.Relation" scheme="URI" content="../../../references/methods/topics_en_v2/methodlist_en_v2.html"/>
<meta name="DC.Relation" scheme="URI" content="db.listReplicaGroups.html"/>
<meta name="DC.Relation" scheme="URI" content="db.resetSnapshot.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="topic_1x2_cnd_5n"/>
<link rel="stylesheet" type="text/css" href="../../../commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../../assets/webhelp_topic.css"/>
<title>db.snapshot()</title>
<script type="text/javascript" src="../../../assets/jquery-1.3.2.js"> </script><script type="text/javascript" src="../../../assets/jquery-ui-1.8.2.custom.min.js"> </script><script type="text/javascript" src="../../../assets/frames_redirect.js"> </script><script type="text/javascript"><!--
    var prefix = "../../../../index.html";
    var ratingFile = "";
    redirectToToc(window.location.search);
    function highlightSearchTerm(){
        if(parent.termsToHighlight != null){
        // highlight each term in the content view  
          for(i = 0 ; i < parent.termsToHighlight.length ; i++){        
              $('*', window.parent.frames[1].document).highlight(parent.termsToHighlight[i]);
          }
        }
    }
//--></script></head>
<body onload="highlightSearchTerm()" id="topic_1x2_cnd_5n"><a name="topic_1x2_cnd_5n"><!-- --></a>
<table class="nav"><tbody><tr><td><div class="navheader"><span class="frames" onclick="redirectFrames(location.pathname)"><script type="text/javascript"><!--
  if (parent.window.location.pathname == window.location.pathname ) document.write('With Frames');                    
                    --></script></span><a class="link" href="../../../references/methods/topics_en_v2/methodlist_en_v2.html" title="SequoiaDB JavaScript Method List"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">SequoiaDB JavaScript Method List</span></a>  </div></td><td width="50%"><a class="navheader_parent_path" href="../../topics/references_en.html" title="Reference">Reference</a> / <a class="navheader_parent_path" href="../../../references/methods/topics_en_v2/methodlist_en_v2.html" title="SequoiaDB JavaScript Method List">SequoiaDB JavaScript Method List</a></td></tr></tbody></table>

  <h1 class="title topictitle1">db.snapshot()</h1>

  <div class="body">
    <div class="section"><h2 class="title sectiontitle">NAME</h2>
      
      <p class="p">snapshot - It lists snapshots.</p>

    </div>

    <div class="section"><h2 class="title sectiontitle">SYNOPSIS</h2>
      
      <p class="p"/>

      <span class="keyword apiname">snapshot</span>(<span class="keyword parmname">&lt;snapType&gt;</span>,<span class="keyword parmname">[cond]</span>,<span class="keyword parmname">[sel]</span>,<span class="keyword parmname">[sort]</span>)
    </div>

    <div class="section"><h2 class="title sectiontitle">CATEGORY</h2>
      
      <p class="p"/>
Sequoiadb
    </div>

    <div class="section"><h2 class="title sectiontitle">DESCRIPTION</h2>
       
      <p class="p">It lists snapshots. Snapshot() is a command used to get the current status of system.</p>

      <dl class="dl parml">
        
          <dt class="dt pt dlterm">snapType (list)</dt>

          <dd class="dd pd">Snapshot type.Please refer to Snapshot.</dd>

        
        
          <dt class="dt pt dlterm">cond (json object)</dt>

          <dd class="dd pd">Selecting condition. Only return the snapshot information of the nodes and replica groups that match the selecting conditions specified in the 'cond' field. When the field is null, return the cluster's information.</dd>

        
        
          <dt class="dt pt dlterm">sel (json object)</dt>

          <dd class="dd pd">Selects the returned field. Returns all the fields when it is null.</dd>

        
        
          <dt class="dt pt dlterm">sort (json object)</dt>

          <dd class="dd pd">Sorts the returned records according to the selected fields. 1 for ascending order, -1 for descending order.
        <dl class="dl parml">
              
                <dt class="dt pt dlterm">Format</dt>

                <dd class="dd pd">Snapshot() has four parameters: snapType, cond, sel, sort. The type of "snapType" is enumeration. Other fields are json objects. The format is as follow:</dd>

                <dd class="dd pd">{"snapType":"&lt;snapshot type&gt;",["cond":"{"Field name 1":{"operation 1":"value 1"},"Field name 2":{"Operation 2":"value 2"}...}"]}</dd>

              
            </dl>

          </dd>
          
                
      </dl>

      <div class="note note"><span class="notetitle">Note:</span> 
        <ul class="ul"><li class="li">For more details on the value of snapType, please refer to Snapshot.</li>

          <li class="li">The parameter "sel" is a json object. The value of field is often specified as a null string. If the parameters are specified in this format: "{"field name 1": "value 1", "field name 2":"value 2",...}", for the fields that do exist in the records, the value of these fields is actually useless; for the fields that do not exist in the records, "{"field name 1": "value 1", "field name 2":"value 2",...}" will be returned.</li>

          <li class="li">If the value of a field is in the type of array. Elements are invoked by "."(dot) and double quotations.</li>

        </ul>
</div>

    </div>
    
    <div class="section"><h2 class="title sectiontitle">Examples</h2>
      
      <div class="p">Set the value of "snapType" as SDB_SNAP_CONTEXTS:<pre class="pre codeblock">db.snapshot(SDB_SNAP_CONTEXTS)</pre>
</div>

      <p class="p">Returns context snapshot of the entire cluster:</p>

      <pre class="pre codeblock">{
  "SessionID": "vmsvr1-cent-x64-1:11820:22",
  "Contexts": [
    {
      "ContextID": 8,
      "Type": "DUMP",
      "Description": "BufferSize:0",
      "DataRead": 0,
      "IndexRead": 0,
      "QueryTimeSpent": 0,
      "StartTimestamp": "2013-12-28-16.07.59.146399"
    }
  ]
}
{
  "SessionID": "vmsvr1-cent-x64-1:11830:22",
  "Contexts": [
    {
      "ContextID": 6,
      "Type": "DUMP",
      "Description": "BufferSize:0",
      "DataRead": 0,
      "IndexRead": 0,
      "QueryTimeSpent": 0,
      "StartTimestamp": "2013-12-28-16.07.59.147576"
    }
  ]
}
{
  "SessionID": "vmsvr1-cent-x64-1:11840:23",
  "Contexts": [
    {
      "ContextID": 7,
      "Type": "DUMP",
      "Description": "BufferSize:0",
      "DataRead": 0,
      "IndexRead": 0,
      "QueryTimeSpent": 0,
      "StartTimestamp": "2013-12-28-16.07.59.148603"
    }
  ]
  }</pre>

      <p class="p">Get the snapshot of the specified replica group by group name or group ID, for example:</p>

      <div class="p"><pre class="pre codeblock">db.snapshot(SDB_SNAP_CONTEXTS,{GroupName:'data1'})</pre>
Return the snapshot of a group named "data1".
        <pre class="pre codeblock">db.snapshot(SDB_SNAP_CONTEXTS,{GroupID:1000})</pre>
Return the snapshot of a replica group with a group ID of 1000.</div>

      <pre class="pre codeblock">{
  "SessionID": "vmsvr1-cent-x64-1:11820:22",
  "Contexts": [
    {
      "ContextID": 11,
      "Type": "DUMP",
      "Description": "BufferSize:0",
      "DataRead": 0,
      "IndexRead": 0,
      "QueryTimeSpent": 0,
      "StartTimestamp": "2013-12-28-16.13.57.864245"
    }
  ]
}
{
  "SessionID": "vmsvr1-cent-x64-1:11840:23",
  "Contexts": [
    {
      "ContextID": 10,
      "Type": "DUMP",
      "Description": "BufferSize:0",
      "DataRead": 0,
      "IndexRead": 0,
      "QueryTimeSpent": 0,
      "StartTimestamp": "2013-12-28-16.13.57.865103"
    }
  ]
  }</pre>

      <p class="p">Get the snapshot of a node by specifying "group name + host name + service name" or "group ID + node ID", for example:</p>

      <div class="p"><pre class="pre codeblock">db.snapshot(SDB_SNAP_CONTEXTS,{GroupName:'data1',HostName:"vmsvr1-cent-x64-1",svcname:"11820"})</pre>

        <pre class="pre codeblock">db.snapshot(SDB_SNAP_CONTEXTS,{GroupID:1000,NodeID:1001})</pre>
</div>

      <pre class="pre codeblock">{
  "SessionID": "vmsvr1-cent-x64-1:11820:22",
  "Contexts": [
    {
      "ContextID": 11,
      "Type": "DUMP",
      "Description": "BufferSize:0",
      "DataRead": 0,
      "IndexRead": 0,
      "QueryTimeSpent": 0,
      "StartTimestamp": "2013-12-28-16.13.57.864245"
    }
  ]
  }</pre>

      <p class="p">Get the snapshot of a node by specifying "host name + service name", for example:</p>

      <div class="p"><pre class="pre codeblock">db.snapshot(SDB_SNAP_CONTEXTS,{HostName:"vmsvr1-cent-x64-1",svcname:"11820"})</pre>

      </div>

    </div>

  </div>

  <div class="related-links"><div class="relinfo"><strong>Related information</strong><br/>
<div><a class="navheader_parent_path" href="db.listReplicaGroups.html" title="db.listReplicaGroups()">db.listReplicaGroups()</a></div>
<div><a class="navheader_parent_path" href="db.resetSnapshot.html" title="db.resetSnapshot()">db.resetSnapshot()</a></div>
</div>
</div>
<div class="navfooter"><a class="link" href="../../../references/methods/topics_en_v2/methodlist_en_v2.html" title="SequoiaDB JavaScript Method List"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">SequoiaDB JavaScript Method List</span></a>  <script type="text/javascript"><!--         
    function expand(){
        parent.tocwin.expandToTopic(window.location.href, this.getAttribute('href'));
    }
    var aArray = document.getElementsByTagName('a');
    var i;
    for (i = 0; i< aArray.length; i++){
      aArray[i].onclick = expand;
    }
//--></script></div><div class="footer"><a href="http://www.sequoiadb.com" target="_blank"><img src="../../../assets/images/sequoiadb_logo.png" alt="SequoiaDB"/></a>SequoiaDB Version 1.11
          
    </div>
</body>
</html>